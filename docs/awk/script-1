BEGIN	{
	 char["A"]="a";char["B"]="b";char["C"]="c";char["D"]="d";
      	 char["E"]="e";char["F"]="f";char["G"]="g";char["H"]="h";
      	 char["I"]="i";char["J"]="j";char["K"]="k";char["L"]="l";
      	 char["M"]="m";char["N"]="n";char["O"]="o";char["P"]="p";
      	 char["Q"]="q";char["R"]="r";char["S"]="s";char["T"]="t";
      	 char["U"]="u";char["V"]="v";char["W"]="w";char["X"]="x";
      	 char["Y"]="y";char["Z"]="z";s=1;ignore="no";output="";
	 printf"\\documentstyle{felib1}\n";
         printf"%%\n";
         printf"%% FELIB Level 1 Document\n";
         printf"%%\n";
	 printf"\\release{4}\n";
	 printf"\\date{FEB~95}\n";
         printf"\\header{}\n";
         printf"%\n";
         printf"\\program{}\n";
         printf"\\title{}\n";
         printf"%\n";
         printf"\\begin{document}\n";
         printf"%\n";
         printf"\\maketitle\n";
         printf"%\n";
	}
{
output = $0
while((i=index(output,"$")) != 0){
	output = substr(output,1,i-1) " " substr(output,i+1,length(output))
}
while((i=index(output,"{{<}}")) != 0){
	output = substr(output,1,i-1) "$\geq$" substr(output,i+5,length(output))
}
while((i=index(output,"{{>}}")) != 0){
	output = substr(output,1,i-1) "$\leq$" substr(output,i+5,length(output))
}
while((i=index(output,"<")) != 0){
	output = substr(output,1,i-1) "$\lt$" substr(output,i+1,length(output))
}
while((i=index(output,">")) != 0){
	output = substr(output,1,i-1) "$\gt$" substr(output,i+1,length(output))
}
while((i=index(output,"_")) != 0){
	output = substr(output,1,i-1) " " substr(output,i+1,length(output))
}
while((i=index(output,"{{")) != 0){
	output = substr(output,1,i-1) "?" substr(output,i+2,length(output))
}
while((i=index(output,"?")) != 0){
	output = substr(output,1,i-1) "{" substr(output,i+1,length(output))
}
while((i=index(output,"}}")) != 0){
	output = substr(output,1,i-1) "?" substr(output,i+2,length(output))
}
while((i=index(output,"?")) != 0){
	output = substr(output,1,i-1) "}" substr(output,i+1,length(output))
}
if(substr($1,1,3) == ".//") {
output = substr(output,2,length(output)-1);
while((i=index(output,"/")) != 0){
	output = substr(output,1,i-1) " " substr(output,i+1,length(output))
}
printf"%s\n",output
}
else if(substr($1,1,3) == ".dd") {s=s+1;
if(s==1) printf"\\section{%s}\n",substr(output,index(output,".dd")+4,length(output)-4);
if(s==2) printf"\n\\subsection{%s}\n\n",substr(output,index(output,".dd {")+5,length(output)-6);
if(s==3) printf"\n\\subsubsection{%s}\n\n",substr(output,index(output,".dd {")+5,length(output)-6);
}
else if(substr($1,1,3) == ".dn") {
if(s==1) printf"\\section{%s}\n",substr(output,index(output,".dn")+4,length(output)-4);
if(s==2) printf"\n\\subsection{%s}\n\n",substr(output,index(output,".dn {")+5,length(output)-6);
if(s==3) printf"\n\\subsubsection{%s}\n\n",substr(output,index(output,".dn {")+5,length(output)-6);
}
else if(substr($1,1,3) == ".du") {printf"\n";s=s-1;}
else if(substr($1,1,6) == ".eject") {printf"\n"}
else if(substr($1,1,5) == ".fill") {printf"\n"}
else if(substr($1,1,6) == ".nfill") {printf"\n"}
else if(substr($1,1,2) == ".p") {printf"\n"}
else if(substr($1,1,2) == ".s") {printf"\n"}
else if(substr($1,1,4) == ".tab") {printf"\n"}
else if(substr($1,1,4) == "C***") {printf"\n"}

else {printf"%s\n",output}
}
END {printf"\\end{%s}\n",s;
     printf"\\end{document}\n"}
